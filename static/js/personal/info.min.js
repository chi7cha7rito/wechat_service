function RegisterController(){Controller.call(this),this.initPage(),this.bindEvents()}RegisterController.prototype.initPage=function(){var e=this;e.returnUrl=e.getQueryString("returnUrl")||e.redirectUrl.personal.list},RegisterController.prototype.bindEvents=function(){var e=this;$(".weui-vcode-img").on("click",function(){e.refreshCode()}),$("#btnGetVerifyCode").on("click",function(){var r=$(this),t=60,o=$.trim($("#txtVerifyCode").val()),n=$("#txtPhoneNo").val()||"",i={};return!r.hasClass("span_disabled")&&(o.length?n.length?e.checkPhone(n)?(r.addClass("span_disabled"),i.verifyCode=o,i.phoneNo=n,void e.request(e.apiUrl.common.getSmsCode,i,{type:"POST",process:function(){var e=window.setInterval(function(){t-=1,r.html("还有("+t+"s)"),0===t&&(r.html("获取验证码"),r.removeClass("span_disabled"),window.clearInterval(e))},1e3)},onExceptionInterface:function(){r.removeClass("span_disabled"),e.refreshCode()},onErrorInterface:function(){r.removeClass("span_disabled"),e.refreshCode()}})):($.toptip("手机号不合法","error"),!1):($.toptip("手机号不能为空","error"),!1):($.toptip("验证码不能为空","error"),!1))}),$(".weui-btn_primary").on("click",function(){var r=$(this);if(r.hasClass("disabled"))return!1;var t=$("#txtName").val()||"",o=$("#txtIdCardNo").val()||"",n=($("#txtVerifyCode").val()||"",$("#txtPhoneNo").val()||""),i=$("#txtSmsCode").val()||"",s={};return t.length?o.length?e.IdCardValidate(o)?($.toptip("不合法的身份证号","error"),!1):n.length?e.checkPhone(n)?i.length?(r.addClass("disabled"),s.name=t,s.phoneNo=n,s.idCardNo=o,s.smsCode=i,void e.request(e.apiUrl.account.register,s,{type:"POST",process:function(r){window.location.href=e.returnUrl},onExceptionInterface:function(){r.removeClass("disabled"),e.refreshCode()},onErrorInterface:function(){r.removeClass("disabled"),e.refreshCode()}})):($.toptip("短信验证码不能为空","error"),!1):($.toptip("手机号不合法","error"),!1):($.toptip("手机号不能为空","error"),!1):($.toptip("身份证不能为空","error"),!1):($.toptip("姓名不能为空","error"),!1)})},RegisterController.prototype.refreshCode=function(){var e=$(".weui-vcode-img");e.attr("src",e.attr("data-src")+"?t="+(new Date).valueOf())},$(function(){new RegisterController}),define("personal/info",function(){});