function WechatPayController(){Controller.call(this),this.bindEvents()}function onBridgeReady(){$(function(){new WechatPayController})}WechatPayController.prototype.bindEvents=function(){var e=this;$(".weui-flex__item").on("click",function(){var t=$(this),n=t.attr("data-name"),r=t.attr("data-price"),i={name:n,price:r};e.getPrePayInfo(i,function(t){WeixinJSBridge.invoke("getBrandWCPayRequest",t,function(t){"get_brand_wcpay_request:ok"==t.err_msg?window.location.href=e.redirectUrl.pay.success:"get_brand_wcpay_request:fail"==t.err_msg&&(window.location.href=e.redirectUrl.pay.error)})})})},WechatPayController.prototype.getPrePayInfo=function(e,t){var n=this;n.request(n.apiUrl.wechat.getPrePayInfo,e,{type:"POST",process:function(e){e&&t&&t(e)}})},"undefined"==typeof WeixinJSBridge?document.addEventListener?document.addEventListener("WeixinJSBridgeReady",onBridgeReady,!1):document.attachEvent&&(document.attachEvent("WeixinJSBridgeReady",onBridgeReady),document.attachEvent("onWeixinJSBridgeReady",onBridgeReady)):onBridgeReady(),define("pay/wechat",function(){});