function ResultController(){Controller.call(this),this.pageSize=5,this.initPage()}!function(e){e.fn.pullload=function(l){var a=e.extend({},e.fn.pullload.defaults,l);return this.each(function(){var l=this;e(this).attr("requestable","true"),e(a.handler).on("scroll.pullload",function(){var i=e(window).height(),s=e(window).scrollTop(),t=e(l).children().last(),o=t.height()+t.offset().top+a.threshold;i+s>o&&"true"==e(l).attr("requestable")&&e.fn.pullload.request(l,a)})})},e.fn.pullload.request=function(l,a){e(l).attr("requestable","false");var i=a.crossDomain?"jsonp":"json",s=a.crossDomain?"GET":a.requestType,t=e(l).data("page-index")||2,o={};"0"==a.mode?o[a.requestLoadedKey]=e(l).children().size():(o[a.pageSizeKey]=a.pageSize,o[a.pageIndexKey]=t),e.fn.pullload.tips(a.loadingTips,l,a);try{e.ajax({url:a.apiUrl,type:s,dataType:i,data:o,success:function(i){return a.callback&&a.callback(i),"1"==a.mode&&e(l).data("page-index",++t),e.fn.pullload.getTotalCount(i,a.countKey)?void(e.fn.pullload.getTotalCount(i,a.countKey)<=e(l).children().size()?(e.fn.pullload.tips(a.lastLoadedTips,l,a),e(a.handler).off("scroll.pullload")):(e(l).attr("requestable","true"),e.fn.pullload.closeTips(l,a))):void e.fn.pullload.tips("您的数据接口好像没有给出总条数嘛！",l,a)},error:function(i){e.fn.pullload.tips(a.loadFailedTips,l,a)}})}catch(n){e.fn.pullload.tips("错误名称："+n.name+"\n错误描述："+n.message)}},e.fn.pullload.tips=function(l,a,i){i.isShowLoadingTips&&(0===e(a).next("."+i.tipsClassName).size()&&e(a).after('<div class="'+i.tipsClassName+'"></div>'),e(a).next("."+i.tipsClassName).html(l),e(a).next("."+i.tipsClassName).slideDown(100))},e.fn.pullload.closeTips=function(l,a){a.isShowLoadingTips&&e(l).next("."+a.tipsClassName).slideUp(100)},e.fn.pullload.getTotalCount=function(e,l){var a=[];return l.indexOf(".")>0&&(a=l.split("."),a[0]&&a[1])?e[a[0]][a[1]]:e[l]},e.fn.pullload.defaults={handler:window,apiUrl:"",crossDoman:!1,requestType:"GET",callback:null,requestLoadedKey:"loaded",countKey:"count",tipsClassName:"data-status",loadingTips:"数据加载中...",lastLoadedTips:"已经加载到最后一页！",loadFailedTips:"数据加载失败，请重试！",threshold:50,isShowLoadingTips:!1,pageIndexKey:"pageIndex",pageSizeKey:"pageSize",pageSize:"10",mode:"1"}}(jQuery),define("components/pullload.js",function(){}),ResultController.prototype.initPage=function(){var e=this;e.request(e.apiUrl.match.result,{pageIndex:1,pageSize:e.pageSize},{showLoadingTips:!0,process:function(l){e.renderList(l),e.initPullLoad()}})},ResultController.prototype.initPullLoad=function(){var e=this;require(["components/pullload.js"],function(){$(".result-list").pullload({apiUrl:e.apiUrl.match.result,threshold:15,crossDoman:!1,pageSize:e.pageSize,countKey:"data.count",callback:function(l){e.renderList(l.data,!0)}})})},ResultController.prototype.renderList=function(e,l){var a=this,i=$(".result-list");if(!l&&(i.empty(),!e.count)){var s='<div class="weui-loadmore weui-loadmore_line">';s+='<span class="weui-loadmore__tips">暂无数据</span>',s+="</div>",i.append(s)}$.each(e.rows,function(e,l){i.append(a.getItem(l))})},ResultController.prototype.getItem=function(e){var l="";return l+='<div class="weui-form-preview">',l+='<div class="weui-form-preview__hd">',l+='<div class="weui-form-preview__item">',l+='<label class="weui-form-preview__label">赛事名次</label>',l+=e.result?'<em class="weui-form-preview__value ranking">第'+e.result+"名</em>":'<em class="weui-form-preview__value ranking">暂无</em>',l+="</div>",l+="</div>",l+='<div class="weui-form-preview__bd">',l+='<div class="weui-form-preview__item">',l+='<label class="weui-form-preview__label">赛事名称</label>',l+='<span class="weui-form-preview__value">'+e.match.matchConfig.name+"</span>",l+="</div>",l+='<div class="weui-form-preview__item">',l+='<label class="weui-form-preview__label">获得奖励</label>',l+='<span class="weui-form-preview__value">'+(e.rewards||0)+" 积分</span>",l+='<div class="weui-form-preview__item">',l+='<label class="weui-form-preview__label">奖励说明</label>',l+='<span class="weui-form-preview__value">'+e.rewardsRemark+"</span>",l+="</div>",l+="</div>",l+="</div>",l+="</div>",$(l)},$(function(){new ResultController}),define("match/result",function(){});