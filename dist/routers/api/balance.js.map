{"version":3,"sources":["../../../src/routers/api/balance.js"],"names":["router","Router","get","req","res","next","pageIndex","query","pageSize","phoneNo","session","user","requestHelper","resp","json","error","memberId","member","id","module","exports"],"mappings":";;;;;;;;;;AAIA;;;;AACA;;;;;;AALA;;;;AAOA,IAAIA,SAAS,kBAAQC,MAAR,EAAb;;AAEA;;;AAGAD,OAAOE,GAAP,CAAW,MAAX;AAAA,0EAAkB,iBAAOC,GAAP,EAAWC,GAAX,EAAeC,IAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAENC,iCAFM,GAEIH,IAAII,KAAJ,CAAUD,SAFd;AAGNE,gCAHM,GAGGL,IAAII,KAAJ,CAAUC,QAHb;AAINC,+BAJM,GAIEN,IAAIO,OAAJ,CAAYC,IAAZ,CAAiBF,OAJnB;AAAA;AAAA,+BAMKG,cAAcV,GAAd,CAAkB;AAC7B,0CAAa,cADgB;AAE7B,0CAAa,SAFgB;AAG7B,sCAAS,MAHoB;AAI7B,oCAAO;AACJI,oDADI;AAEJE,kDAFI;AAGJC;AAHI;AAJsB,yBAAlB,CANL;;AAAA;AAMNI,4BANM;;;AAiBVT,4BAAIU,IAAJ,CAASD,IAAT;;AAjBU;AAAA;;AAAA;AAAA;AAAA;;AAoBV,yCAAOE,KAAP;;AApBU;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAlB;;AAAA;AAAA;AAAA;AAAA;;AAwBA;;;AAGAf,OAAOE,GAAP,CAAW,QAAX;AAAA,2EAAoB,kBAAOC,GAAP,EAAWC,GAAX,EAAeC,IAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAERW,gCAFQ,GAECb,IAAIO,OAAJ,CAAYC,IAAZ,CAAiBM,MAAjB,CAAwBC,EAFzB;AAAA;AAAA,+BAIGN,cAAcV,GAAd,CAAkB;AAC7B,0CAAa,cADgB;AAE7B,0CAAa,SAFgB;AAG7B,sCAAS,OAHoB;AAI7B,oCAAO;AACJc;AADI;AAJsB,yBAAlB,CAJH;;AAAA;AAIRH,4BAJQ;;;AAaZT,4BAAIU,IAAJ,CAASD,IAAT;;AAbY;AAAA;;AAAA;AAAA;AAAA;;AAgBZ,yCAAOE,KAAP;;AAhBY;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAApB;;AAAA;AAAA;AAAA;AAAA;;AAoBAI,OAAOC,OAAP,GAAiBpB,MAAjB","file":"balance.js","sourcesContent":["/**\n * desc:个人帐户相关的api 定义\n */\n\nimport express from 'express'\nimport logger from '../../utils/logger';\n\nlet router = express.Router()\n\n/**\n * 获取个人帐户明细\n */\nrouter.get(\"/get\",async (req,res,next)=>{\n    try{\n        let pageIndex=req.query.pageIndex;\n        let pageSize=req.query.pageSize;\n        let phoneNo=req.session.user.phoneNo;\n\n        let resp=await requestHelper.get({\n            \"moduleName\":\"hulk_service\",\n            \"controller\":\"balance\",\n            \"action\":\"find\",\n            \"data\":{\n               pageIndex,\n               pageSize,\n               phoneNo\n            }\n        })\n\n        res.json(resp);\n\n    }catch(e){\n        logger.error(`api_balance_get_error=>${e}`);\n    }\n})\n\n/**\n * 获取个人帐户余额\n */\nrouter.get(\"/total\",async (req,res,next)=>{\n    try{\n        let memberId=req.session.user.member.id;\n\n        let resp=await requestHelper.get({\n            \"moduleName\":\"hulk_service\",\n            \"controller\":\"balance\",\n            \"action\":\"total\",\n            \"data\":{\n               memberId\n            }\n        })\n\n        res.json(resp);\n\n    }catch(e){\n        logger.error(`api_balance_total_error=>${e}`);\n    }\n})\n\nmodule.exports = router"]}