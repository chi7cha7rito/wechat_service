{"version":3,"sources":["../../../src/routers/api/credits.js"],"names":["router","Router","get","req","res","next","pageIndex","query","pageSize","memberId","session","user","member","id","requestHelper","resp","json","error","module","exports"],"mappings":";;;;;;;;;;;;;;AAIA;;;;AACA;;;;;;AALA;;;;AAOA,IAAIA,SAAS,kBAAQC,MAAR,EAAb;;AAEA;;;AAGAD,OAAOE,GAAP,CAAW,MAAX;AAAA,0EAAkB,iBAAOC,GAAP,EAAWC,GAAX,EAAeC,IAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAENC,iCAFM,GAEIH,IAAII,KAAJ,CAAUD,SAFd;AAGNE,gCAHM,GAGGL,IAAII,KAAJ,CAAUC,QAHb;AAINC,gCAJM,GAIGN,IAAIO,OAAJ,CAAYC,IAAZ,CAAiBC,MAAjB,CAAwBC,EAJ3B;AAAA;AAAA,+BAMKC,cAAcZ,GAAd,CAAkB;AAC7B,0CAAa,cADgB;AAE7B,0CAAa,QAFgB;AAG7B,sCAAS,MAHoB;AAI7B,oCAAO;AACJI,oDADI;AAEJE,kDAFI;AAGJC;AAHI;AAJsB,yBAAlB,CANL;;AAAA;AAMNM,4BANM;;;AAiBVX,4BAAIY,IAAJ,CAASD,IAAT;;AAjBU;AAAA;;AAAA;AAAA;AAAA;;AAoBV,yCAAOE,KAAP,6BAAuC,qCAAvC;;AApBU;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAlB;;AAAA;AAAA;AAAA;AAAA;;AAwBA;;;AAGAjB,OAAOE,GAAP,CAAW,QAAX;AAAA,2EAAoB,kBAAOC,GAAP,EAAWC,GAAX,EAAeC,IAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAERI,gCAFQ,GAECN,IAAIO,OAAJ,CAAYC,IAAZ,CAAiBC,MAAjB,CAAwBC,EAFzB;AAAA;AAAA,+BAIGC,cAAcZ,GAAd,CAAkB;AAC7B,0CAAa,cADgB;AAE7B,0CAAa,QAFgB;AAG7B,sCAAS,OAHoB;AAI7B,oCAAO;AACJO;AADI;AAJsB,yBAAlB,CAJH;;AAAA;AAIRM,4BAJQ;;;AAaZX,4BAAIY,IAAJ,CAASD,IAAT;;AAbY;AAAA;;AAAA;AAAA;AAAA;;AAgBZ,yCAAOE,KAAP,8BAAwC,sCAAxC;;AAhBY;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAApB;;AAAA;AAAA;AAAA;AAAA;;AAoBAC,OAAOC,OAAP,GAAiBnB,MAAjB","file":"credits.js","sourcesContent":["/**\n * desc:个人积分相关的api 定义\n */\n\nimport express from 'express'\nimport logger from '../../utils/logger';\n\nlet router = express.Router()\n\n/**\n * 获取个人积分信息\n */\nrouter.get(\"/get\",async (req,res,next)=>{\n    try{\n        let pageIndex=req.query.pageIndex;\n        let pageSize=req.query.pageSize;\n        let memberId=req.session.user.member.id;\n\n        let resp=await requestHelper.get({\n            \"moduleName\":\"hulk_service\",\n            \"controller\":\"points\",\n            \"action\":\"find\",\n            \"data\":{\n               pageIndex,\n               pageSize,\n               memberId\n            }\n        })\n\n        res.json(resp);\n\n    }catch(e){\n        logger.error(`api_credits_get_error=>${JSON.stringify(e)}`);\n    }\n})\n\n/**\n * 获取个人积分余额\n */\nrouter.get(\"/total\",async (req,res,next)=>{\n    try{\n        let memberId=req.session.user.member.id;\n\n        let resp=await requestHelper.get({\n            \"moduleName\":\"hulk_service\",\n            \"controller\":\"points\",\n            \"action\":\"total\",\n            \"data\":{\n               memberId\n            }\n        })\n\n        res.json(resp);\n\n    }catch(e){\n        logger.error(`api_points_total_error=>${JSON.stringify(e)}`);\n    }\n})\n\nmodule.exports = router"]}