{"version":3,"sources":["../../../src/middlewares/global/logger.js"],"names":["req","res","next","app","locals","log","info","url","method","body","query","warn","Error"],"mappings":";;;;;;;;;;kBASe,UAAUA,GAAV,EAAeC,GAAf,EAAoBC,IAApB,EAA0B;AACvC;AACAF,MAAIG,GAAJ,CAAQC,MAAR,CAAeC,GAAf;AACA,mBAAOC,IAAP,gCAAyCN,IAAIO,GAA7C;AACA;AACA,UAAQP,IAAIQ,MAAZ;AACE,SAAK,MAAL;AACE,uBAAOF,IAAP,qBAA8B,yBAAeN,IAAIS,IAAnB,CAA9B;AACA;AACF,SAAK,KAAL;AACE,uBAAOH,IAAP,qBAA8B,yBAAeN,IAAIU,KAAnB,CAA9B;AACA;AACF;AACE,uBAAOC,IAAP;AACAT,WAAK,IAAIU,KAAJ,CAAU,kBAAV,CAAL;AACA;AAVJ;AAYAV;AACD,C;;AApBD","file":"logger.js","sourcesContent":["/**\n * desc :  用于记录post和get请求\n * @param  {object} req\n * @param  {object} res\n * @param  {default} next\n */\n\nimport logger from '../../utils/logger'\n\nexport default function (req, res, next) {\n  // req.session.member = {member: {id: 1}}\n  req.app.locals.log = logger\n  logger.info(`=======request_url=======:${req.url} `)\n  // logger.info(`request_headers:${JSON.stringify(req.headers)}`)\n  switch (req.method) {\n    case 'POST':\n      logger.info(`request_params:${JSON.stringify(req.body)}`)\n      break\n    case 'GET':\n      logger.info(`request_params:${JSON.stringify(req.query)}`)\n      break\n    default:\n      logger.warn(`invalid request!`)\n      next(new Error('invalid request!'))\n      break\n  }\n  next()\n}\n"]}